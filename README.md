# SqlSchemaGenerator
SqlSchemaGenerator โ Documentation
๐ ูุธุฑุฉ ุนุงูุฉ
SqlSchemaGenerator ููุชุจุฉ .NET ูุชูุฏูุฉ ูุฅุฏุงุฑุฉ ูุชูููุฏ ูุชูููุฐ ุชุบููุฑุงุช ููุงุนุฏ ุงูุจูุงูุงุช (Database Schema Migrations) ูุน ุฏุนู:
โข 	ุชูููุฏ ุงูุณูุฑูุจุชุงุช (CREATE / DROP / ALTER) ุชููุงุฆููุง ูู ุชุนุฑููุงุช ุงูู Entities.
โข 	ุชุญููู ุงูุฃุซุฑ (Impact Analysis) ูุจู ุงูุชูููุฐ.
โข 	ุชุญููู ุงูุฃูุงู (Safety Analysis) ูุชุฌูุจ ุงูุฃูุงูุฑ ุงูุฎุทูุฑุฉ.
โข 	ุงูุชูููุฐ ุงูุชูุงุนูู ุฃู ุงูุชููุงุฆู ูุน ุฏุนู ุงูู Rollback.
โข 	ุชุชุจุน ุงูููุฌุฑูุดู ุนุจุฑ  ูุน ุญูุธ Snapshots.
โข 	ููุชุฑุฉ ุงูู Types ูู Assemblies ุจูุงุกู ุนูู Base Class ุฃู Interface.

๐๏ธ ุงูููููุงุช ุงูุฃุณุงุณูุฉ


โ๏ธ ุงูุฅุนุฏุงุฏุงุช



โข 	SingleBatch โ ุฅุตุฏุงุฑ ูุงุญุฏ ููู Session.
โข 	PerEntity โ ุฅุตุฏุงุฑ ููู Entity.
โข 	PerLogicalBatch โ ุฅุตุฏุงุฑ ููู ูุฌููุนุฉ ููุทููุฉ.

๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู
1. ุชุดุบูู ููุฌุฑูุดู ุนูู Types ูุญุฏุฏุฉ

2. ุชุดุบูู ููุฌุฑูุดู ุนูู Assembly ูุงูู

3. ุชุดุบูู ููุฌุฑูุดู ุนูู Assemblies ูุชุนุฏุฏุฉ

4. ุงุณุชุฎุฏุงู ุงููุณุฎุฉ Generic


๐ง ุงูููุชุฑุฉ ุงูุฐููุฉ ููู Types
โข 	ุชุฏุนู ููุชุฑุฉ ุงูู Types ูู Assembly ุฃู ุฃูุชุฑ.
โข 	ุงูููุชุฑุฉ ุชุนูู ุจู OR Logic: ุฃู Type ูุทุงุจู ุฃู ุดุฑุท ูู ุงูุดุฑูุท (Base Class ุฃู Interface) ูุชู ุงุฎุชูุงุฑู.
โข 	ูููู ุชูุฑูุฑ ุฃูุซุฑ ูู ุดุฑุท.

๐ ุฃูุถุงุน ุงูุชูููุฐ
โข 	Dry Run: ุชูููุฏ ุงูุณูุฑูุจุชุงุช ููุท ุจุฏูู ุชูููุฐ.
โข 	Interactive Mode: ุชูููุฐ ุชูุงุนูู ุฃูุฑ ุจุฃูุฑ.
โข 	Batch Mode: ุชูููุฐ ูู ุงูุฃูุงูุฑ ุฏูุนุฉ ูุงุญุฏุฉ.
โข 	Auto Merge: ูุญุงููุฉ ุฏูุฌ ุงูุชุบููุฑุงุช ุชููุงุฆููุง.
โข 	Rollback: ุชูููุฐ ุฃู ูุนุงููุฉ ุณูุฑูุจุชุงุช ุงูุชุฑุงุฌุน ุนูุฏ ุงููุดู.

๐ก๏ธ ููุฒุงุช ุงูุฃูุงู
- Safety Analysis: ูููุน ุชูููุฐ ุฃูุงูุฑ ุฎุทูุฑุฉ (ูุซู Drop PK) ุฅูุง ุจููุงููุฉ.
- Impact Analysis: ููุถุญ ุชุฃุซูุฑ ุงูุชุบููุฑุงุช ุนูู ุงูุฌุฏุงูู ูุงูุจูุงูุงุช.
- Versioning: ุชุชุจุน ูู ููุฌุฑูุดู ุจุฑูู ุฅุตุฏุงุฑ ูุฑูุฏ.


flowchart TD
    A[ุงุฎุชูุงุฑ ุงูู Types] -->|ูุฏูู: List<Type>| B[RunMigrationSession]
    A2[ุงุฎุชูุงุฑ ุงูู Types ูู Assembly/Assemblies] -->|ููุชุฑุฉ ุจู Base Class ุฃู Interface| B

    B --> C[EntityDefinitionBuilder.BuildAllWithRelationships]
    C --> D[LoadEntityFromDatabase]
    D --> E[BuildMigrationScript]
    E --> F[AnalyzeImpact & SafetyAnalysis]
    F -->|ุนุฑุถ ุงูุชูุฑูุฑ| G[ShowPreMigrationReport]

    F -->|ุชูููุฐ| H{Interactive Mode?}
    H -->|Yes| I[ExecuteInteractiveAdvanced / Async]
    H -->|No| J[Execute / Async]

    I --> K[SqlScriptRunner.ExecuteScriptAsync]
    J --> K

    K --> L[MigrationHistoryStore.EnsureTableAndInsertPending]
    L --> M[ุชูููุฐ SQL ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช]
    M --> N[MigrationHistoryStore.MarkApplied / MarkFailed]
    N --> O[ุชุญุฏูุซ Snapshot Store]
    O --> P[ุทุจุงุนุฉ Summary]
	
	ุดุฑุญ ุงูุฑุณู
- A / A2: ููุทุฉ ุงูุจุฏุงูุฉุ ุฅูุง ุชูุฑูุฑ ูุงุฆูุฉ Types ูุฏูููุง ุฃู ุงุฎุชูุงุฑูุง ูู Assemblies ูุน ููุชุฑุฉ.
- B: ุงุณุชุฏุนุงุก RunMigrationSession ุฃู ุฃุญุฏ ุงูุฃููุฑููุฏุฒ.
- C: ุจูุงุก ุชุนุฑููุงุช ุงูู Entities ูุชุญููู ุงูุนูุงูุงุช.
- D: ุชุญููู ุงูุชุนุฑูู ุงูุญุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.
- E: ุชูููุฏ ุณูุฑูุจุช ุงูููุฌุฑูุดู.
- F: ุชุญููู ุงูุฃุซุฑ ูุงูุฃูุงู.
- G: ุนุฑุถ ุงูุชูุฑูุฑ ูุจู ุงูุชูููุฐ (ุงุฎุชูุงุฑู).
- H: ุชุญุฏูุฏ ูุถุน ุงูุชูููุฐ (ุชูุงุนูู ุฃู ุชููุงุฆู).
- I / J: ุชูููุฐ ุงูุณูุฑูุจุชุงุช.
- K: ุชูููุฐ ูุนูู ููุฃูุงูุฑ ุนุจุฑ SqlScriptRunner.
- L: ุชุณุฌูู ุงูููุฌุฑูุดู ูู ุงูู History ูู Pending.
- M: ุชูููุฐ ุงูุฃูุงูุฑ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.
- N: ุชุญุฏูุซ ุญุงูุฉ ุงูููุฌุฑูุดู (Applied ุฃู Failed).
- O: ุญูุธ Snapshot ุฌุฏูุฏ.
- P: ุนุฑุถ ููุฎุต ุงูุชูููุฐ.


